# 2장. 의존성 역전하기

- 단일 책임 원칙
- 부수효과에 관한 이야기
- 의존성 역전 원칙
- 클린 아키텍처
- 유각형 아키텍처(헥사고날 아키텍처)
- 마무리

## 단일 책임 원칙

### Single Responsibility Principle(SRP)
> 하나의 컴포넌트는 오로지 한 가지 일만 해야 하고, 그것을 올바르게 수행해야 한다

오로지 한 가지 일만 하는 것은 단일 책임이라는 말을 가장 직관적으로 해석한 것이다.

'책임'은 사실 '오로지 한 가지 일만 하는 것'보다는 '변경할 이유'로 해석해야한다.
![image](https://user-images.githubusercontent.com/23182130/215115980-45330483-515e-411d-87ad-7e4a8e629e90.jpeg)
어떤 컴포넌트의 의존성 각각은 이 컴포넌트를 변경하는 이유 하나씩에 해당한다. 점선 화살표처럼 전이 의존성이라고 하더라도 말이다.

## 부수효과에 관한 이야기
특정 컴포넌트가 변경될 때 발생하는 부수효과가 크다면, 잘못된 구조화된 소프트웨어라서 더 많은 비용을 지불하도록 만드는 경우가 있다. 

## 의존성 역전 원칙
계층형 아키텍처에서 계층 간 의존성은 항상 다음 계층인 아래 방향을 가리킨다.
영속석 계층에 대한 도메인 계층의 의존성 떄문에 영속성 계층을 변경할 떄마다 잠재적으로 도메인 계층도 변경해야 한다. 그러나 도메인 코드는 애플리케이션에서 가장 중요한 코드다. 
영속성 코드가 바뀐다고 해서 도메인 코드까지 바꾸기 싶지는 않다.

### Dependency Inversion Principle(DIP)
도메인 코드와 영속성 코드 간의 의존성을 역전시켜서 영속성 코드가 도메인 코드에 의존하고, 도메인 코드를 '변경할 이유'의 개수를 줄여보자.

![image](https://user-images.githubusercontent.com/23182130/215115986-c9caad2d-08d6-4748-949a-8f549572c306.png)
도메인 계층에 인터페이스를 도입함으로써 의존성을 역전시킬 수 있고, 그 덕분에 영속성 계층이 도메인 계층에 의해 존재하게 된다.




